#!/bin/bash
# Chezmoi run_onchange è„šæœ¬ï¼šå½“é…ç½®å˜æ›´æ—¶è¿è¡Œ mise install (ä»… Linux)
# mise.toml hash: {{ include "dot_config/mise/config.toml" | sha256sum }}

{{ if eq .chezmoi.os "linux" }}
set -e

echo "ğŸ”§ è¿è¡Œ mise install..."

# ç¡®ä¿ mise åœ¨ PATH ä¸­
export PATH="$HOME/.local/bin:$PATH"

if ! command -v mise &>/dev/null; then
	echo "âŒ Mise æœªå®‰è£…ï¼Œè·³è¿‡"
	exit 0
fi

# å®‰è£…å·¥å…·
cd "$HOME"
mise install --yes

echo "âœ… Mise å·¥å…·å®‰è£…å®Œæˆ"
mise list
{{ else }}
# macOS ä½¿ç”¨ Homebrewï¼Œè·³è¿‡ Mise
echo "â„¹ï¸  macOS ç³»ç»Ÿï¼Œè·³è¿‡ Mise installï¼ˆä½¿ç”¨ Homebrewï¼‰"
{{ end }}
