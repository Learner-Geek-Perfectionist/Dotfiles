# Chezmoi 配置文件
# 此文件定义了 chezmoi 的行为和变量

[data]
    # 用户信息
    # 优先使用环境变量，其次提示输入，最后使用默认值
    {{- $name := or (env "CHEZMOI_NAME") (env "GIT_AUTHOR_NAME") (env "USER") "User" }}
    {{- $email := or (env "CHEZMOI_EMAIL") (env "GIT_AUTHOR_EMAIL") (printf "%s@localhost" (env "USER")) }}
    {{- $gitUser := or (env "CHEZMOI_GIT_USER") (env "GITHUB_USER") (env "USER") "user" }}
    name = "{{ $name }}"
    email = "{{ $email }}"
    
    # Git 配置
    git_user = "{{ $gitUser }}"

    # Dotfiles 元数据
    dotfiles_version = "4.0.0"
    dotfiles_repo = "https://github.com/Learner-Geek-Perfectionist/Dotfiles.git"
    default_branch = "beta"
    default_shell = "zsh"
    default_editor = "nvim"

    # 运行时环境（根据 chezmoi 上下文自动计算）
    platform = "{{ .chezmoi.os }}"
    arch = "{{ .chezmoi.arch }}"
    is_macos = {{ if eq .chezmoi.os "darwin" }}true{{ else }}false{{ end }}
    is_linux = {{ if eq .chezmoi.os "linux" }}true{{ else }}false{{ end }}
    manage_pixi = {{ if eq .chezmoi.os "linux" }}true{{ else }}false{{ end }}
    manage_homebrew = {{ if eq .chezmoi.os "darwin" }}true{{ else }}false{{ end }}

[data.paths]
    chezmoi_source = "{{ .chezmoi.sourceDir }}"
    destination = "{{ .chezmoi.homeDir }}"
    sh_script_dir = "{{ .chezmoi.homeDir }}/sh-script"
    pixi_home = "{{ .chezmoi.homeDir }}/.pixi"
    zsh_cache = "{{ .chezmoi.homeDir }}/.cache/zsh"
    zsh_history = "{{ .chezmoi.homeDir }}/.cache/zsh/.zsh_history"
    ssh_config = "{{ .chezmoi.homeDir }}/.ssh/config"

[edit]
    command = "nvim"

[diff]
    command = "delta"
    pager = "delta"

[merge]
    command = "nvim"
    args = ["-d", "{{ "{{" }} .Destination {{ "}}" }}", "{{ "{{" }} .Source {{ "}}" }}", "{{ "{{" }} .Target {{ "}}" }}"]

# 自动提交更改
[git]
    autoCommit = false
    autoPush = false

# 脚本执行
[interpreters.sh]
    command = "bash"
